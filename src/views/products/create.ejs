<!DOCTYPE html>
<html>

<head>
  <%- include ("../partials/head.ejs") %>
</head>

<body class="body-login">
  <header>
    <%- include ("../partials/header.ejs")%>
  </header>




  <main class="main-register">
    <div class="caja-register">

      <form action="/product/create" method="POST" class="formulario-completo" enctype="multipart/form-data">
        <h3>CREAR UN NUEVO PRODUCTO</h3>
        <br>
        <br>
        <!-- Primer autor -->
      <label for="autor" class="form-label">Autor</label>
       <div class="primerAutor">
        <input name="autor" value="<%= locals.old ? old.autor : null %>" class="form-input-categoria"></input>
  
          <i class="fa-solid fa-circle-plus"></i>
          <i class="fa-solid fa-circle-minus"></i>
        </div>
             <% if(locals.errors && errors.autor) {%>
          <div class="text-danger">
   
            <%= errors.autor.msg %>
   
          </div>
          <% } %> 
     
  

          <!-- Segundo autor -->
          <div class="segundoAutor">
            <label for="segundoAutor" class="form-label">Segundo autor</label>
            <input name="segundoAutor" value="<%= locals.old ? old.autor : null %>" class="form-input-categoria"></input>
            <% if(locals.errors && errors.segundoAautor) {%>
              <div class="text-danger">
        
                <%= errors.segundoAutor.msg %>
  
              </div>
              <% } %>
            </div>
          
            <!-- Revisar si va acá la variable locals para recordar lo que se había ingresado -->
            <label for="editorial" class="form-label">Seleccioná una editorial o creá una nueva <a
                href="/product/createEditorial" class="linkAutor">aquí</a></label>
            <select name="editorial" value="<%= locals.old ? old.editorial : null %>" class="form-input-categoria">
              <option value="">Seleccioná una editorial</option>
              <% editoriales.forEach(editorial=> { %>
              
                <option value="<%= editorial.id %>">
                  <%= editorial.name %>
                  <br>
                </option>
                <% }) %>
            </select>
            <% if(locals.errors && errors.editorial) {%>
              <div class="text-danger">
           
                <%= errors.editorial.msg %>
            
              </div>
              <% } %>

                <label for="titulo" class="form-label">Título</label>
                <input type="text" name="titulo" id="titulo" class="input-barras"
                  value="<%= locals.old ? old.titulo : null %>">
                <% if(locals.errors && errors.titulo) {%>
                  <div class="text-danger">
        
                    <%= errors.titulo.msg %>
       
                  </div>
                  <% } %>




                    <!-- Agrego campos de ilustrador y traductor, revisar -->
                    <label for="ilustrador" class="form-label">Ilustrador</label>
                    <input type="text" name="ilustrador" id="ilustrador" class="input-barras"
                      value="<%= locals.old ? old.ilustrador : null %>">
                    <% if(locals.errors && errors.ilustrador) {%>
                      <div class="text-danger">
                
                        <%= errors.ilustrador.msg %>
           
                      </div>
                      <% } %>
                        <label for="traductor" class="form-label">Traductor</label>
                        <input type="text" name="traductor" id="traductor" class="input-barras"
                          value="<%= locals.old ? old.traductor : null %>">
                        <% if(locals.errors && errors.traductor) {%>
                          <div class="text-danger">
                 
                            <%= errors.traductor.msg %>
               
                          </div>
                          <% } %>

                            <label for="genero" class="form-label">Seleccioná el género</label>
                            <select name="genero" id="genero" class="form-input-categoria">
                              <option value="">Elegí un género</option>
                              <% generos.forEach(genero=> { %>
                                <option value="<%= genero.id %>">
                                  <%= genero.name %>
                                  <br>
                                </option>
                                <% }) %>
                            </select>
                             

                            <label for="idioma" class="form-label">Idioma</label>
                            <input type="text" name="idioma" id="idioma" class="input-barras">
                            <% if(locals.errors && errors.idioma) {%>
                              <div class="text-danger">
                       
                                <%= errors.idioma.msg %>
                       
                              </div>
                              <% } %> 


                            <label for="isbn" class="form-label">ISBN</label>
                            <input type="text" name="isbn" id="isbn" class="input-barras">
                            <% if(locals.errors && errors.isbn) {%>
                              <div class="text-danger">
                       
                                <%= errors.isbn.msg %>
                       
                              </div>
                              <% } %> 

                            <label for="precio" class="form-label">Precio</label>
                            <input type="number" name="precio" id="precio" class="input-barras">
                            <% if(locals.errors && errors.precio) {%>
                              <div class="text-danger">
                       
                                <%= errors.precio.msg %>
                       
                              </div>
                              <% } %> 

                            <label for="fecha_publicacion" class="form-label">Año de publicación</label>
                            <input type="date" name="fecha_publicacion" id="fecha_publicacion" class="input-barras">


                            <label for="cantidad" class="form-label">Cantidad</label>
                            <input type="number" name="cantidad" id="cantidad" class="input-barras">
                            <% if(locals.errors && errors.cantidad) {%>
                              <div class="text-danger">
                       
                                <%= errors.cantidad.msg %>
                       
                              </div>
                              <% } %> 
                            <label for="paginas">Cantidad de páginas</label>
                            <input type="number" name="paginas" id="paginas" class="input-barras">
                            <% if(locals.errors && errors.paginas) {%>
                              <section class="text-danger">
                        
                                <%= errors.paginas.msg %>
                           
                              </section>
                              <% } %>

                            <label class="form-label" for="portada">Imagen de la portada</label>
                            <input type="file" name="imagen" class="input-avatar" id="imagen">
                            <% if(locals.errors && errors.imagen) {%>
                              <section class="text-danger">
                           
                                <%= errors.imagen.msg %>
                      
                              </section>
                              <% } %>

                            <div class="textDescripcion">
                              <label for="descripcion"></label>
                              <textarea id="descripcion" name="descripcion" rows="12" cols="40"
                                placeholder="Descripción"></textarea>
                                <% if(locals.errors && errors.descripcion) {%>
                                  <div class="text-danger">
                                    
                                    <%= errors.descripcion.msg %>
                                   
                                  </div>
                                  <% } %>
                            </div>

                            <div class="botones-register">
                              <button type="submit" class="boton-enviar">Enviar</button>
                              <button type="reset" class="boton-borrar">Borrar</button>
                            </div>

      </form>
    </div>
  </main>

  <footer class="footer-section">
    <%- include ("../partials/footer.ejs")%>
  </footer>

</body>
<script src="/js/create.js"></script>
</html>